define.alias("@glimmer/component/-private/ember-component-manager","msg-reactions/component-managers/glimmer")
define.alias("artdeco-button/components/artdeco-button","msg-reactions/components/artdeco-button")
define.alias("artdeco-datepicker/components/artdeco-calendar","msg-reactions/components/artdeco-calendar")
define.alias("artdeco-card/components/artdeco-card-image","msg-reactions/components/artdeco-card-image")
define.alias("artdeco-card/components/artdeco-card","msg-reactions/components/artdeco-card")
define.alias("artdeco-carousel/components/artdeco-carousel-item","msg-reactions/components/artdeco-carousel-item")
define.alias("artdeco-carousel/components/artdeco-carousel-slider","msg-reactions/components/artdeco-carousel-slider")
define.alias("artdeco-carousel/components/artdeco-carousel-title","msg-reactions/components/artdeco-carousel-title")
define.alias("artdeco-carousel/components/artdeco-carousel","msg-reactions/components/artdeco-carousel")
define.alias("artdeco-completeness-meter-linear/components/artdeco-completeness-meter-linear","msg-reactions/components/artdeco-completeness-meter-linear")
define.alias("artdeco-modal/components/artdeco-confirmation-dialog","msg-reactions/components/artdeco-confirmation-dialog")
define.alias("artdeco-datepicker/components/artdeco-datepicker-embedded-cal","msg-reactions/components/artdeco-datepicker-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-datepicker","msg-reactions/components/artdeco-datepicker")
define.alias("artdeco-datepicker/components/artdeco-daterange-embedded-cal","msg-reactions/components/artdeco-daterange-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-daterange","msg-reactions/components/artdeco-daterange")
define.alias("artdeco-dropdown/components/artdeco-dropdown-content","msg-reactions/components/artdeco-dropdown-content")
define.alias("artdeco-dropdown/components/artdeco-dropdown-header","msg-reactions/components/artdeco-dropdown-header")
define.alias("artdeco-dropdown/components/artdeco-dropdown-item","msg-reactions/components/artdeco-dropdown-item")
define.alias("artdeco-dropdown/components/artdeco-dropdown-trigger","msg-reactions/components/artdeco-dropdown-trigger")
define.alias("artdeco-dropdown/components/artdeco-dropdown","msg-reactions/components/artdeco-dropdown")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-badge","msg-reactions/components/artdeco-entity-lockup-badge")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-caption","msg-reactions/components/artdeco-entity-lockup-caption")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-content","msg-reactions/components/artdeco-entity-lockup-content")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-image","msg-reactions/components/artdeco-entity-lockup-image")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-metadata","msg-reactions/components/artdeco-entity-lockup-metadata")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-subtitle","msg-reactions/components/artdeco-entity-lockup-subtitle")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-title","msg-reactions/components/artdeco-entity-lockup-title")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup","msg-reactions/components/artdeco-entity-lockup")
define.alias("artdeco-entity-pile/components/artdeco-entity-pile","msg-reactions/components/artdeco-entity-pile")
define.alias("artdeco-hoverables/components/artdeco-hoverable-content","msg-reactions/components/artdeco-hoverable-content")
define.alias("artdeco-hoverables/components/artdeco-hoverable-trigger","msg-reactions/components/artdeco-hoverable-trigger")
define.alias("artdeco-inline-feedback/components/artdeco-inline-feedback","msg-reactions/components/artdeco-inline-feedback")
define.alias("artdeco-loader/components/artdeco-loader","msg-reactions/components/artdeco-loader")
define.alias("artdeco-modal/components/container","msg-reactions/components/artdeco-modal-container")
define.alias("artdeco-modal/components/artdeco-modal-content","msg-reactions/components/artdeco-modal-content")
define.alias("artdeco-modal/components/artdeco-modal-footer","msg-reactions/components/artdeco-modal-footer")
define.alias("artdeco-modal/components/artdeco-modal-header","msg-reactions/components/artdeco-modal-header")
define.alias("artdeco-modal/components/artdeco-modal","msg-reactions/components/artdeco-modal")
define.alias("artdeco-notification-badge/components/artdeco-notification-badge","msg-reactions/components/artdeco-notification-badge")
define.alias("artdeco-pagination/components/artdeco-pagination-ellipsis","msg-reactions/components/artdeco-pagination-ellipsis")
define.alias("artdeco-pagination/components/artdeco-pagination-indicator","msg-reactions/components/artdeco-pagination-indicator")
define.alias("artdeco-pagination/components/artdeco-pagination","msg-reactions/components/artdeco-pagination")
define.alias("artdeco-text-input/components/artdeco-text-input-multi","msg-reactions/components/artdeco-text-input-multi")
define.alias("artdeco-text-input/components/artdeco-text-input-single","msg-reactions/components/artdeco-text-input-single")
define.alias("artdeco-text-input/components/artdeco-text-input","msg-reactions/components/artdeco-text-input")
define.alias("artdeco-toast/components/artdeco-toast-item","msg-reactions/components/artdeco-toast-item")
define.alias("artdeco-toast/components/artdeco-toasts","msg-reactions/components/artdeco-toasts")
define.alias("artdeco-toggle/components/artdeco-toggle","msg-reactions/components/artdeco-toggle")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-input","msg-reactions/components/artdeco-typeahead-input")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-result","msg-reactions/components/artdeco-typeahead-result")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-results-list","msg-reactions/components/artdeco-typeahead-results-list")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead","msg-reactions/components/artdeco-typeahead")
define.alias("ember-semaphore/components/block-profile","msg-reactions/components/block-profile")
define.alias("ember-semaphore/components/cleared-content-modal-v2","msg-reactions/components/cleared-content-modal-v2")
define.alias("ember-semaphore/components/cleared-content-modal","msg-reactions/components/cleared-content-modal")
define.alias("ember-vector-images/components/custom-image","msg-reactions/components/custom-image")
define.alias("ember-semaphore/components/ember-semaphore","msg-reactions/components/ember-semaphore")
define.alias("ember-wormhole/components/ember-wormhole","msg-reactions/components/ember-wormhole")
define("msg-reactions/components/emoji/emoji-i18n",["exports","@ember/template-factory","@ember/component/template-only","@ember/component"],(function(e,t,a,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,i.setComponentTemplate)((0,t.createTemplateFactory)({id:"33jaR6LL",block:'[[[1,"\\n"],[1,"\\n"],[1,"\\n  "]],[],false,[]]',moduleName:"msg-reactions/components/emoji/emoji-i18n.gjs",isStrictMode:!0}),(0,a.default)("emoji-i18n","EmojiI18n"))
e.default=o}))
define("msg-reactions/components/emoji/promoted-reactions-list-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/component","msg-shared/utils/constants","emoji-picker/helpers/emoji-skintone-modifier","emoji-picker/utils/emojis/emojis-popular","@glimmer/component","@glimmer/tracking","@ember/service","@ember/object","@ember/debug","ember-cli-pemberly-i18n/helpers/t","@ember/helper","@ember/modifier","emoji-picker/components/emoji-hoverable","emoji-picker/components/emoji-i18n"],(function(e,t,a,i,o,r,n,s,c,l,m,d,p,u,g,f,h,b,y,v){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var k,j,_,w,S,R,N,E,D,T,M,O
const{KEYCODES:x}=s.default
e.default=(0,n.setComponentTemplate)((0,r.createTemplateFactory)({id:"rwkYkBsY",block:'[[[1,"\\n"],[1,"    "],[10,"ul"],[14,0,"emoji-popular-list__container"],[14,"role","menu"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,0,["emojisWithSkintone"]]],null]],null],null,[[[1,"        "],[10,"li"],[12],[1,"\\n"],[1,"          "],[11,0],[16,"aria-label",[28,[32,0],["i18n_react_a11y","msg-reactions/components/emoji/promoted-reactions-list-presenter"],[["emoji"],[[30,1,["shortName"]]]]]],[24,0,"emoji-popular-list__item"],[16,"onblur",[30,3]],[16,"onfocus",[28,[32,1],[[30,4],true],null]],[24,"tabindex","0"],[24,"role","menuitem"],[16,"title",[30,1,["shortName"]]],[4,[32,2],["click",[28,[32,1],[[30,0,["handlePopularEmojiSelect"]],[30,1,["unicode"]],[30,2]],null]],null],[4,[32,2],["keyup",[28,[32,1],[[30,0,["handlePopularEmojiSelect"]],[30,1,["unicode"]],[30,2]],null]],null],[12],[1,"\\n            "],[10,1],[14,0,"emoji-popular-list__item-emoji"],[12],[1,"\\n              "],[1,[30,1,["unicode"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[1,2]],null],[1,"\\n      "],[10,"li"],[12],[1,"\\n        "],[8,[32,3],null,[["@handleEmojiSelect","@hoverableIdPrefix","@hoverableOutletId","@onTriggerClick","@onTriggerBlur","@onHoverableShow","@onHoverableHide","@isCircleTrigger","@size","@trackingClosePickerString","@trackingOpenPickerString","@trackingSelectEmojiString","@trackingSelectSearchedEmojiString","@triggerClasses","@triggerData"],[[30,0,["addReactionToMessageEvent"]],[52,[30,5],"msg_overlay_hover_reaction","msg_pillar_hover_reaction"],[52,[30,5],"msg-overlay__emoji-hoverable-outlet"],[30,0,["onTriggerClick"]],[30,0,["handleEmojiTriggerBlur"]],[30,6],[30,0,["onActionMenuEmojiPickerClose"]],false,1,[52,[30,5],"overlay.close_reactionpicker_frompromotedmenu","close_reactionpicker_frompromotedmenu"],[52,[30,5],"overlay.open_reactionpicker_frompromotedmenu","open_reactionpicker_frompromotedmenu"],[52,[30,5],"overlay.select_emoji_frompromotedmenu","select_emoji_frompromotedmenu"],[52,[30,5],"overlay.select_searched_emoji_frompromotedmenu","select_searched_emoji_frompromotedmenu"],"msg-reactions__entry-point msg-reactions-action-menu__entry-point m0 p0",[30,0,["triggerData"]]]],null],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],["emoji","index","@hideAllActionMenus","@setMessageFocusState","@isOverlay","@onEmojiHoverableShow"],false,["each","-track-array","if"]]',moduleName:"msg-reactions/components/emoji/promoted-reactions-list-presenter.gjs",scope:()=>[f.default,h.fn,b.on,y.default],isStrictMode:!0}),(k=(0,p.inject)("i18n"),j=(0,p.inject)("msg-data@data-manager"),_=(0,p.inject)("msg-shared@emoji-skintone"),w=(0,p.inject)("lix"),S=(0,p.inject)("tracking"),R=class extends m.default{get emojisWithSkintone(){return this.emojis.map((e=>e.hasSkintone?{...e,unicode:(0,c.modifySingleEmojiWithSkintone)(e.unicode,this.emojiSkintoneManager.selectedSkintone)}:e))}constructor(){super(...arguments);(0,t.default)(this,"i18n",N,this);(0,t.default)(this,"msgDataManager",E,this);(0,t.default)(this,"emojiSkintoneManager",D,this);(0,t.default)(this,"lix",T,this);(0,t.default)(this,"tracking",M,this);(0,t.default)(this,"triggerData",O,this)
this.triggerData={messageUrn:this.args.messageUrn,conversationUrn:this.args.conversationUrn,hideAllActionMenus:this.args.hideAllActionMenus}
this.emojis=this._computeTranslatedEmojis(this.lix.getTreatmentIsEnabled("voyager.web.messaging-reply-to-writes")?l.ReducedEmojisPopular:l.default)}_computeTranslatedEmojis(e){return e.map((e=>{if(e.shortName)return e
e.shortName=this.i18n.lookupTranslation(v.default,e.i18nNameKey)()
e.i18nKeywords&&(e.keywords=e.i18nKeywords.map((e=>this.i18n.lookupTranslation(v.default,e)())))
return e}))}handlePopularEmojiSelect(e,t,a){if("keyup"===a.type&&a.which!==x.ENTER&&a.which!==x.SPACEBAR)return
const i=this.args.isOverlay?"overlay.add_promoted_emoji":"add_promoted_emoji"
this.tracking.fireInteractionEvent(`${i}${t+1}`)
this.msgDataManager.addReaction(this.args.messageUrn,e,this.args.conversationUrn)
"click"===a.type&&this.args.hideAllActionMenus&&this.args.hideAllActionMenus()}addReactionToMessageEvent(e){let{body:t,triggerData:a={}}=e
const{messageUrn:i,conversationUrn:o}=a
if(i){this.msgDataManager.addReaction(i,t,o)
this.onActionMenuEmojiPickerClose(a)}}onActionMenuEmojiPickerClose(e){this.args.onEmojiHoverableHide&&this.args.onEmojiHoverableHide(e)
e&&e.hideAllActionMenus&&"function"==typeof e.hideAllActionMenus&&e.hideAllActionMenus()}onTriggerClick(){this.args.hideOptionsMenu()
this.args.setMessageFocusState(!0)}handleEmojiTriggerBlur(e){if(!e)return
if(!e.relatedTarget){this.args.setMessageFocusState(!1)
return}const t=document.querySelector(".msg-s-event-listitem__message-bubble--is-focused .msg-s-event-listitem__actions-container"),a=e.relatedTarget.classList.contains("artdeco-hoverable-content--visible"),i=t&&t.contains(e.relatedTarget)
a||i||this.args.setMessageFocusState(!1)}},N=(0,i.default)(R.prototype,"i18n",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.default)(R.prototype,"msgDataManager",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,i.default)(R.prototype,"emojiSkintoneManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(R.prototype,"lix",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,i.default)(R.prototype,"tracking",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,i.default)(R.prototype,"triggerData",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(R.prototype,"handlePopularEmojiSelect",[u.action],Object.getOwnPropertyDescriptor(R.prototype,"handlePopularEmojiSelect"),R.prototype),(0,i.default)(R.prototype,"addReactionToMessageEvent",[u.action],Object.getOwnPropertyDescriptor(R.prototype,"addReactionToMessageEvent"),R.prototype),(0,i.default)(R.prototype,"onActionMenuEmojiPickerClose",[u.action],Object.getOwnPropertyDescriptor(R.prototype,"onActionMenuEmojiPickerClose"),R.prototype),(0,i.default)(R.prototype,"onTriggerClick",[u.action],Object.getOwnPropertyDescriptor(R.prototype,"onTriggerClick"),R.prototype),(0,i.default)(R.prototype,"handleEmojiTriggerBlur",[u.action],Object.getOwnPropertyDescriptor(R.prototype,"handleEmojiTriggerBlur"),R.prototype),R))}))
define("msg-reactions/components/emoji/reaction-summary-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/component","emoji-picker/helpers/emoji-skintone-modifier","msg-shared/utils/constants","emoji-picker/utils/emojis","ember-lifeline","global-utils/utils/is-browser","@glimmer/tracking","@glimmer/component","ember-batcher","@ember/service","@ember/object","@ember/destroyable","@ember/render-modifiers/modifiers/did-insert","ember-set-helper/helpers/set","@ember/modifier","ember-cli-pemberly-i18n/helpers/t","ember-wormhole/components/ember-wormhole","global-helpers/helpers/lte","@ember/helper","global-helpers/helpers/sub","emoji-picker/components/emoji-hoverable","emoji-picker/components/emoji-i18n"],(function(e,t,a,i,o,r,n,s,c,l,m,d,p,u,g,f,h,b,y,v,k,j,_,w,S,R,N,E){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var D,T,M,O,x,P,z,C,I,A,U,q,H,B,$,K,L,F,V,W
e.default=(0,n.setComponentTemplate)((0,r.createTemplateFactory)({id:"aNXis9Eq",block:'[[[1,"\\n"],[41,[30,1,["reactionSummaryItems","length"]],[[[1,"      "],[11,"ul"],[24,0,"msg-reactions-reaction-summary-presenter__container"],[4,[32,0],[[28,[32,1],[[30,0],"reactionListEl"],null]],null],[12],[1,"\\n"],[42,[28,[31,2],[[28,[31,2],[[30,1,["reactionSummaryItems"]]],null]],null],null,[[[1,"          "],[10,"li"],[14,0,"msg-reactions-reaction-summary-presenter__pill-container"],[12],[1,"\\n            "],[11,"button"],[16,"aria-pressed",[52,[30,2,["viewerReacted"]],"true","false"]],[24,0,"m0"],[16,"data-reaction-id",[30,2,["emoji"]]],[24,4,"button"],[4,[32,2],["click",[28,[32,3],[[30,0,["toggleExistingReaction"]],[30,2]],null]],null],[4,[32,2],["mouseenter",[28,[32,3],[[30,0,["showReactors"]],[30,2]],null]],null],[4,[32,2],["focus",[28,[32,3],[[30,0,["showReactors"]],[30,2]],null]],null],[4,[32,2],["mouseleave",[28,[32,3],[[30,0,["stopShowingReactors"]],[30,2]],null]],null],[4,[32,2],["blur",[28,[32,3],[[30,0,["stopShowingReactors"]],[30,2]],null]],null],[4,[32,2],["keyup",[28,[32,3],[[30,0,["onReactorsKeyUp"]],[30,2]],null]],null],[12],[1,"\\n              "],[10,0],[15,0,[29,["msg-reactions-reaction-summary-presenter__pill",[52,[30,2,["viewerReacted"]]," msg-reactions-reaction-summary-presenter__pill--viewer-reacted"]]]],[12],[1,"\\n                "],[10,1],[14,0,"a11y-text"],[12],[1,"\\n"],[41,[30,2,["viewerReacted"]],[[[1,"                    "],[1,[28,[32,4],["i18n_a11y_unreact_text","msg-reactions/components/emoji/reaction-summary-presenter"],null]],[1,"\\n"]],[]],[[[1,"                    "],[1,[28,[32,4],["i18n_a11y_react_text","msg-reactions/components/emoji/reaction-summary-presenter"],null]],[1,"\\n"]],[]]],[1,"                "],[13],[1,"\\n                "],[10,1],[14,0,"msg-reactions-reaction-summary-presenter__pill-emoji"],[12],[1,"\\n                  "],[1,[30,2,["emoji"]]],[1,"\\n                "],[13],[1,"\\n                "],[10,1],[14,0,"msg-reactions-reaction-summary-presenter__pill-emoji-count-container t-mono"],[12],[1,"\\n                  "],[10,1],[14,0,"emoji-count"],[12],[1,[30,2,["count"]]],[13],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n\\n"],[41,[30,0,["reactionBeingViewed"]],[[[1,"              "],[8,[32,5],null,[["@to"],[[52,[30,3],"msg-overlay__reactor-list-outlet","msg-pillar__reactor-list-outlet"]]],[["default"],[[[[1,"\\n                "],[10,0],[14,0,"msg-reactions-reaction-summary-presenter__reactors-list-container t-14 t-white artdeco-card"],[15,5,[30,0,["reactorListStyle"]]],[12],[1,"\\n"],[41,[28,[32,6],[[30,0,["displayedReactorNames","length"]],5],null],[[[1,"                    "],[1,[28,[32,4],["i18n_reactors_list_full_names_lte_5","msg-reactions/components/emoji/reaction-summary-presenter"],[["reactorNames","emojiName"],[[30,0,["displayedReactorNames"]],[30,0,["emojiI18nName"]]]]]],[1,"\\n"]],[]],[[[1,"                    "],[1,[28,[32,4],["i18n_reactors_list_full_names_gt_5","msg-reactions/components/emoji/reaction-summary-presenter"],[["name1","name2","name3","name4","othersCount","emojiName"],[[28,[32,7],[[30,0,["displayedReactorNames"]],"0"],null],[28,[32,7],[[30,0,["displayedReactorNames"]],"1"],null],[28,[32,7],[[30,0,["displayedReactorNames"]],"2"],null],[28,[32,7],[[30,0,["displayedReactorNames"]],"3"],null],[28,[32,8],[[30,0,["displayedReactorNames","length"]],4],null],[30,0,["emojiI18nName"]]]]]],[1,"\\n"]],[]]],[1,"                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n"]],[2]],null],[1,"\\n"],[1,"        "],[10,"li"],[12],[1,"\\n          "],[8,[32,9],null,[["@handleEmojiSelect","@onHoverableShow","@onHoverableHide","@hoverableIdPrefix","@hoverableOutletId","@isCircleTrigger","@size","@trackingClosePickerString","@trackingOpenPickerString","@trackingSelectEmojiString","@trackingSelectSearchedEmojiString","@triggerClasses","@triggerData"],[[30,0,["addReactionToMessageEvent"]],[30,4],[30,5],[52,[30,3],"msg_overlay_summary_reaction","msg_pillar_summary_reaction"],[52,[30,3],"msg-overlay__emoji-hoverable-outlet"],false,1,[52,[30,3],"overlay.close_reactionpicker_frommessage","close_reactionpicker_frommessage"],[52,[30,3],"overlay.open_reactionpicker_frommessage","open_reactionpicker_frommessage"],[52,[30,3],"overlay.select_emoji_frommessage","select_emoji_frommessage"],[52,[30,3],"overlay.select_searched_emoji_frommessage","select_searched_emoji_frommessage"],"msg-reactions-reaction-summary-presenter__entry-point msg-reactions-reaction-summary-presenter__reaction-summary__entry-point m0 p0",[30,0,["triggerData"]]]],null],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "]],["@viewData","reaction","@isOverlay","@onEmojiHoverableShow","@onEmojiHoverableHide"],false,["if","each","-track-array"]]',moduleName:"msg-reactions/components/emoji/reaction-summary-presenter.gjs",scope:()=>[y.default,v.default,k.on,S.fn,j.default,_.default,w.default,S.get,R.default,N.default],isStrictMode:!0}),(D=(0,f.inject)("i18n"),T=(0,f.inject)("msg-data@data-manager"),M=(0,f.inject)("authentication@authenticated-user"),O=(0,f.inject)("global-services@a11y-notification"),x=(0,f.inject)("client-sensor-web@client-sensor"),P=(0,f.inject)("jet"),z=(0,f.inject)("tracking"),C=class e extends u.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",I,this);(0,t.default)(this,"msgDataManager",A,this);(0,t.default)(this,"authenticatedUser",U,this);(0,t.default)(this,"a11yNotification",q,this);(0,t.default)(this,"clientSensor",H,this);(0,t.default)(this,"jet",B,this);(0,t.default)(this,"reactionBeingViewed",$,this);(0,t.default)(this,"triggerData",K,this);(0,t.default)(this,"displayedReactorNames",L,this);(0,t.default)(this,"emojiI18nName",F,this);(0,t.default)(this,"reactorListStyle",V,this);(0,a.default)(this,"delayedShowReactorTasks",{});(0,t.default)(this,"tracking",W,this)
this.triggerData={messageUrn:this.args.viewData.messageUrn,conversationUrn:this.args.viewData.conversationUrn}
this.selfDisplayName={firstName:this.i18n.lookupTranslation(e,"i18n_you")(),isSelf:!0}
this.selfDisplayNameCapitalized={firstName:this.i18n.lookupTranslation(e,"i18n_you_capitalized")(),isSelf:!0}}toggleExistingReaction(e,t){const{emoji:a}=e,i=this.args.isOverlay?"overlay.":"",{viewerReacted:o}=e,r=o?"remove_reaction":"add_plusone_reaction",n=e.count
d.default&&this._animateCount(t,n,o)
this.tracking.fireInteractionEvent(`${i}${r}`)
const{messageUrn:s,conversationUrn:c}=this.args.viewData
if(o){this.msgDataManager.removeReaction(s,a,c)
1===n&&this.stopShowingReactors(e)
this.displayedReactorNames&&(this.displayedReactorNames=this.displayedReactorNames.filter((e=>!e.isSelf)))}else{this.msgDataManager.addReaction(s,a,c)
this.displayedReactorNames&&(this.displayedReactorNames=[...this.displayedReactorNames,this.selfDisplayName])}}addReactionToMessageEvent(e){let{body:t,triggerData:a={}}=e
const{messageUrn:i,conversationUrn:o}=a
i&&this.msgDataManager.addReaction(i,t,o)}_animateCount(e,t,a){const i=e.currentTarget
if(i&&d.default&&!this.isDestroying){const e=i.querySelector(".msg-reactions-reaction-summary-presenter__pill-emoji-count-container"),o=document.createElement("span")
jSecure.setElementContent(o,t)
const r=document.createElement("span")
r.textContent=t+(a?-1:1)
let n=0,s=a?-14:14
const c=a?14:-14,l=a?1:-1,d=i.querySelector(".emoji-count")
d.style.visibility="hidden"
o.style.position="absolute"
o.style.left=0
o.style.top=n
r.style.position="absolute"
r.style.left=0
r.style.top=s
const p=()=>{if(n===c)(0,m.cancelTask)(this,this.origNumIntervalId)
else{n+=l
o.style.top=`${n}px`}if(0===s)(0,m.cancelTask)(this,this.newNumIntervalId)
else{s+=l
r.style.top=`${s}px`}};(0,g.mutateDOM)((()=>{e.appendChild(o)
e.appendChild(r)}))
this.origNumIntervalId=this.scheduleInterval(p,"origNumIntervalId",33);(0,m.runTask)(this,(()=>{this.isDestroying||(0,g.mutateDOM)((()=>{d.removeAttribute("style")
o.remove()
r.remove()}))}),200)}}scheduleInterval(e,t,a){return(0,m.runTask)(this,(()=>{if(!this.isDestroying){this[t]=this.scheduleInterval(e,t,a)
e.apply(this)}}),a)}showReactors(t){const{emoji:a}=t
if(this.reactionBeingViewed&&this.reactionBeingViewed.emoji===t.emoji)return
const i=(0,m.runTask)(this,(()=>{this.msgDataManager.fetchReactors(this.args.viewData.messageUrnForReactors,t,this.args.viewData.conversationUrn).then((i=>{if(!(0,b.isDestroying)(this)&&void 0!==this.delayedShowReactorTasks[a]&&i.length){const o=this.reactionListEl.querySelector(`[data-reaction-id="${a}"]`)
this.reactionBeingViewed=t
const r=o.closest(".msg-reactions-reaction-summary-presenter__pill-container").getBoundingClientRect()
this.reactorListStyle=`top:${r.top}px;left:${r.left}px;`
const n=(0,s.removeSkintoneFromEmojis)(a),{i18nNameKey:c}=l.default.find((e=>e.unicode===n))
this.emojiI18nName=c?this.i18n.lookupTranslation(E.default,c)():a
this.displayedReactorNames=this._reactorsToReactorNamesDisplay(i)
this.a11yNotification.setTextInLiveRegion(this.i18n.lookupTranslation(e,"i18n_a11y_reactors_full_names")([{reactorNames:this.displayedReactorNames,emojiName:this.emojiI18nName}]))
if(this.displayedReactorNames.length!==t.count){this.clientSensor.incrementMetricCounter({groupName:"messaging",metricName:"reaction-count-mismatch"})
this.jet.info(new Error("Reaction count from summary mismatches with number of reactors"),[`reactors list length: ${this.displayedReactorNames.length}`,`reaction summary count: ${t.count}`,`self reacted: ${t.viewerReacted}`])}}}))}),200)
this.delayedShowReactorTasks[a]=i}_reactorsToReactorNamesDisplay(e){const{miniProfile:t}=this.authenticatedUser,a=t.dashEntityUrn,i=e.map((e=>e.hostIdentityUrn===a?this.selfDisplayName:"ORGANIZATION"===e.kind?{firstName:e.name.text}:{firstName:e.firstName,lastName:e.lastName}));(null==i?void 0:i[0])===this.selfDisplayName&&(i[0]=this.selfDisplayNameCapitalized)
return i}stopShowingReactors(e,t){if(t&&"blur"===t.type&&!t.relatedTarget)return
const{emoji:a}=e,i=this.delayedShowReactorTasks[a]
if(i){(0,m.cancelTask)(this,i)
delete this.delayedShowReactorTasks[a]
this.reactionBeingViewed=void 0
this.displayedReactorNames=void 0}}onReactorsKeyUp(e,t){"keyup"===t.type&&t.which===c.default.KEYCODES.ESC&&this.stopShowingReactors(e)}},I=(0,i.default)(C.prototype,"i18n",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(C.prototype,"msgDataManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,i.default)(C.prototype,"authenticatedUser",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=(0,i.default)(C.prototype,"a11yNotification",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,i.default)(C.prototype,"clientSensor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,i.default)(C.prototype,"jet",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,i.default)(C.prototype,"reactionBeingViewed",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=(0,i.default)(C.prototype,"triggerData",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,i.default)(C.prototype,"displayedReactorNames",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,i.default)(C.prototype,"emojiI18nName",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=(0,i.default)(C.prototype,"reactorListStyle",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=(0,i.default)(C.prototype,"tracking",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(C.prototype,"toggleExistingReaction",[h.action],Object.getOwnPropertyDescriptor(C.prototype,"toggleExistingReaction"),C.prototype),(0,i.default)(C.prototype,"addReactionToMessageEvent",[h.action],Object.getOwnPropertyDescriptor(C.prototype,"addReactionToMessageEvent"),C.prototype),(0,i.default)(C.prototype,"showReactors",[h.action],Object.getOwnPropertyDescriptor(C.prototype,"showReactors"),C.prototype),(0,i.default)(C.prototype,"stopShowingReactors",[h.action],Object.getOwnPropertyDescriptor(C.prototype,"stopShowingReactors"),C.prototype),(0,i.default)(C.prototype,"onReactorsKeyUp",[h.action],Object.getOwnPropertyDescriptor(C.prototype,"onReactorsKeyUp"),C.prototype),C))}))
define.alias("ember-vector-images/components/lazy-background","msg-reactions/components/lazy-background")
define.alias("ember-vector-images/components/lazy-image","msg-reactions/components/lazy-image")
define.alias("artdeco-icons-web/components/linkedin-logo","msg-reactions/components/linkedin-logo")
define("msg-reactions/config/environment",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
let t
try{const e="msg-reactions/config/environment",a=document.querySelector('meta[name="'+e+'"]').getAttribute("content")
t=JSON.parse(unescape(a))}catch(e){t={}}e.default=t}))
define.alias("ember-truth-helpers/helpers/and","msg-reactions/helpers/and")
define.alias("artdeco-datepicker/helpers/artdeco-adjust-date-for-timezone","msg-reactions/helpers/artdeco-adjust-date-for-timezone")
define.alias("artdeco-datepicker/helpers/artdeco-is-between-dates","msg-reactions/helpers/artdeco-is-between-dates")
define.alias("artdeco-datepicker/helpers/cal-dates-equal","msg-reactions/helpers/cal-dates-equal")
define.alias("ember-holy-futuristic-template-namespacing-batman/helpers/-translate-dynamic-2","msg-reactions/helpers/ember-holy-futuristic-template-namespacing-batman-translate-dynamic-2")
define.alias("ember-truth-helpers/helpers/eq","msg-reactions/helpers/eq")
define.alias("ember-cli-pemberly-i18n/helpers/format-number","msg-reactions/helpers/format-number")
define.alias("ember-semaphore/helpers/format-title","msg-reactions/helpers/format-title")
define.alias("ember-truth-helpers/helpers/gt","msg-reactions/helpers/gt")
define.alias("ember-truth-helpers/helpers/gte","msg-reactions/helpers/gte")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-to-icon-name","msg-reactions/helpers/hue-web-artdeco-icon-migration-runtime")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-to-icon-v2","msg-reactions/helpers/hue-web-artdeco-li-icon-migration-runtime-v2")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-to-icon-path","msg-reactions/helpers/hue-web-artdeco-li-icon-migration-runtime")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-argument","msg-reactions/helpers/hue-web-artdeco-migration-runtime")
define.alias("ember-truth-helpers/helpers/is-array","msg-reactions/helpers/is-array")
define.alias("ember-truth-helpers/helpers/is-empty","msg-reactions/helpers/is-empty")
define.alias("ember-truth-helpers/helpers/is-equal","msg-reactions/helpers/is-equal")
define.alias("artdeco-icons-web/helpers/li-icon","msg-reactions/helpers/li-icon")
define.alias("ember-async-data/helpers/load","msg-reactions/helpers/load")
define.alias("ember-truth-helpers/helpers/lt","msg-reactions/helpers/lt")
define.alias("ember-truth-helpers/helpers/lte","msg-reactions/helpers/lte")
define.alias("ember-truth-helpers/helpers/not-eq","msg-reactions/helpers/not-eq")
define.alias("ember-truth-helpers/helpers/not","msg-reactions/helpers/not")
define.alias("ember-truth-helpers/helpers/or","msg-reactions/helpers/or")
define("msg-reactions/helpers/ref-to",["exports","ember-ref-bucket/helpers/ref-to"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.defineProperty(e,"refTo",{enumerable:!0,get:function(){return t.default}})}))
define.alias("ember-app-scheduler/helpers/route-idle","msg-reactions/helpers/route-idle")
define.alias("ember-set-helper/helpers/set","msg-reactions/helpers/set")
define.alias("ember-cli-pemberly-i18n/helpers/t","msg-reactions/helpers/t")
define.alias("ember-truth-helpers/helpers/xor","msg-reactions/helpers/xor")
define.alias("ember-uuid","msg-reactions/index")
define("msg-reactions/initializers/icons",["exports","artdeco-icons-web/src/icons","msg-reactions/config/environment"],(function(e,t,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
function i(e){throw e}e.default={name:"icons",initialize:function(){const{environment:e,APP:o}=a.default
let r,n
o&&({artdecoCustomSpriteUrl:r,artdecoCustomSpriteName:n}=o)
const s="test"!==e
t.default.load(s,r,n).catch(i)}}}))
define.alias("ember-cli-pemberly-lix/initializers/lix","msg-reactions/initializers/lix")
define.alias("ember-m3/initializers/m3-store","msg-reactions/initializers/m3-store")
define.alias("ember-ref-bucket/instance-initializers/global-ref-cleanup","msg-reactions/instance-initializers/global-ref-cleanup")
define.alias("artdeco-datepicker/modifiers/artdeco-calendar-click-watcher","msg-reactions/modifiers/artdeco-calendar-click-watcher")
define.alias("ember-ref-bucket/modifiers/create-ref","msg-reactions/modifiers/create-ref")
define.alias("@ember/render-modifiers/modifiers/did-insert","msg-reactions/modifiers/did-insert")
define.alias("@ember/render-modifiers/modifiers/did-update","msg-reactions/modifiers/did-update")
define.alias("ember-prop-modifier","msg-reactions/modifiers/prop")
define.alias("@ember/render-modifiers/modifiers/will-destroy","msg-reactions/modifiers/will-destroy")
define.alias("artdeco-hoverables/services/artdeco-hoverable","msg-reactions/services/artdeco-hoverable")
define.alias("artdeco-modal/services/artdeco-modal","msg-reactions/services/artdeco-modal")
define.alias("artdeco-toast/services/artdeco-toast","msg-reactions/services/artdeco-toast")
define.alias("client-sensor-web/services/client-sensor","msg-reactions/services/client-sensor")
define.alias("ember-date-service/services/date","msg-reactions/services/date")
define.alias("@linkedin/ember-restli-graphql/services/graphql","msg-reactions/services/graphql")
define.alias("@linkedin/ember-pem/services/internal-event-utils","msg-reactions/services/internal-event-utils")
define.alias("@linkedin/ember-pem/services/internal-pem-tracking","msg-reactions/services/internal-pem-tracking")
define.alias("ember-cli-pemberly-lix/services/lix","msg-reactions/services/lix")
define.alias("ember-m3/services/m3-schema-manager","msg-reactions/services/m3-schema-manager")
define.alias("@linkedin/ember-pem/services/pem-response-metadata","msg-reactions/services/pem-response-metadata")
define.alias("@linkedin/ember-pem/services/pem-tracking","msg-reactions/services/pem-tracking")
define.alias("persistent-toast-manager/services/persistent-toast-manager","msg-reactions/services/persistent-toast-manager")
define.alias("@linkedin/ember-qualtrics/services/qualtrics-surveys","msg-reactions/services/qualtrics-surveys")
define.alias("ember-cli-pemberly-m3/services/store","msg-reactions/services/store")
define.alias("@linkedin/ember-pem/services/tracer","msg-reactions/services/tracer")
define("msg-reactions/template-registry",[],(function(){}))
define.alias("ember-async-data/tracked-async-data","msg-reactions/tracked-async-data")
define.alias("client-sensor-web/utils/helpers","msg-reactions/utils/helpers")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/utils/mapping-data","msg-reactions/utils/mapping-data")
define("msg-reactions/utils/uuid-generator",["exports","ember-uuid/utils/uuid-generator"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}})
Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})
Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}})
Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}})}))
define.alias("ember-vector-images/utils/vector-url","msg-reactions/utils/vector-url")

//# sourceMappingURL=engine.map